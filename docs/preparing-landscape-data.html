<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 3 Preparing Landscape Data | Using citizen science to parse climatic and landcover influences on bird occupancy within a tropical biodiversity hotspot</title>
  <meta name="description" content="Influence of land cover and climate on the occupancy of avian distributions along a tropical montane gradient" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 3 Preparing Landscape Data | Using citizen science to parse climatic and landcover influences on bird occupancy within a tropical biodiversity hotspot" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Influence of land cover and climate on the occupancy of avian distributions along a tropical montane gradient" />
  <meta name="github-repo" content="pratikunterwegs/eBirdOccupancy" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 3 Preparing Landscape Data | Using citizen science to parse climatic and landcover influences on bird occupancy within a tropical biodiversity hotspot" />
  
  <meta name="twitter:description" content="Influence of land cover and climate on the occupancy of avian distributions along a tropical montane gradient" />
  

<meta name="author" content="Vijay Ramesh" />
<meta name="author" content="Pratik R. Gupte" />
<meta name="author" content="Morgan W. Tingley" />
<meta name="author" content="VV Robin" />
<meta name="author" content="Ruth DeFries" />


<meta name="date" content="2020-12-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="preparing-ebird-data.html"/>
<link rel="next" href="examining-spatial-sampling-bias.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#attribution"><i class="fa fa-check"></i><b>1.1</b> Attribution</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#data-access"><i class="fa fa-check"></i><b>1.2</b> Data access</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#data-processing"><i class="fa fa-check"></i><b>1.3</b> Data processing</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="preparing-ebird-data.html"><a href="preparing-ebird-data.html"><i class="fa fa-check"></i><b>2</b> Preparing eBird Data</a><ul>
<li class="chapter" data-level="2.1" data-path="preparing-ebird-data.html"><a href="preparing-ebird-data.html#prepare-libraries-and-data-sources"><i class="fa fa-check"></i><b>2.1</b> Prepare libraries and data sources</a></li>
<li class="chapter" data-level="2.2" data-path="preparing-ebird-data.html"><a href="preparing-ebird-data.html#filter-data"><i class="fa fa-check"></i><b>2.2</b> Filter data</a></li>
<li class="chapter" data-level="2.3" data-path="preparing-ebird-data.html"><a href="preparing-ebird-data.html#process-filtered-data"><i class="fa fa-check"></i><b>2.3</b> Process filtered data</a></li>
<li class="chapter" data-level="2.4" data-path="preparing-ebird-data.html"><a href="preparing-ebird-data.html#spatial-filter"><i class="fa fa-check"></i><b>2.4</b> Spatial filter</a></li>
<li class="chapter" data-level="2.5" data-path="preparing-ebird-data.html"><a href="preparing-ebird-data.html#handle-presence-data"><i class="fa fa-check"></i><b>2.5</b> Handle presence data</a></li>
<li class="chapter" data-level="2.6" data-path="preparing-ebird-data.html"><a href="preparing-ebird-data.html#add-decimal-time"><i class="fa fa-check"></i><b>2.6</b> Add decimal time</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="preparing-landscape-data.html"><a href="preparing-landscape-data.html"><i class="fa fa-check"></i><b>3</b> Preparing Landscape Data</a><ul>
<li class="chapter" data-level="3.1" data-path="preparing-landscape-data.html"><a href="preparing-landscape-data.html#prepare-libraries"><i class="fa fa-check"></i><b>3.1</b> Prepare libraries</a></li>
<li class="chapter" data-level="3.2" data-path="preparing-landscape-data.html"><a href="preparing-landscape-data.html#prepare-spatial-extent"><i class="fa fa-check"></i><b>3.2</b> Prepare spatial extent</a></li>
<li class="chapter" data-level="3.3" data-path="preparing-landscape-data.html"><a href="preparing-landscape-data.html#prepare-terrain-rasters"><i class="fa fa-check"></i><b>3.3</b> Prepare terrain rasters</a></li>
<li class="chapter" data-level="3.4" data-path="preparing-landscape-data.html"><a href="preparing-landscape-data.html#prepare-chelsa-rasters"><i class="fa fa-check"></i><b>3.4</b> Prepare CHELSA rasters</a></li>
<li class="chapter" data-level="3.5" data-path="preparing-landscape-data.html"><a href="preparing-landscape-data.html#resample-landcover-from-10m-to-1km"><i class="fa fa-check"></i><b>3.5</b> Resample landcover from 10m to 1km</a></li>
<li class="chapter" data-level="3.6" data-path="preparing-landscape-data.html"><a href="preparing-landscape-data.html#resample-other-rasters-to-1km"><i class="fa fa-check"></i><b>3.6</b> Resample other rasters to 1km</a><ul>
<li class="chapter" data-level="3.6.1" data-path="preparing-landscape-data.html"><a href="preparing-landscape-data.html#read-in-resampled-landcover"><i class="fa fa-check"></i><b>3.6.1</b> Read in resampled landcover</a></li>
<li class="chapter" data-level="3.6.2" data-path="preparing-landscape-data.html"><a href="preparing-landscape-data.html#reproject-environmental-data-using-landcover-as-a-template"><i class="fa fa-check"></i><b>3.6.2</b> Reproject environmental data using landcover as a template</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="preparing-landscape-data.html"><a href="preparing-landscape-data.html#temperature-and-rainfall-in-relation-to-elevation"><i class="fa fa-check"></i><b>3.7</b> Temperature and rainfall in relation to elevation</a><ul>
<li class="chapter" data-level="3.7.1" data-path="preparing-landscape-data.html"><a href="preparing-landscape-data.html#prepare-libraries-and-ci-function"><i class="fa fa-check"></i><b>3.7.1</b> Prepare libraries and CI function</a></li>
<li class="chapter" data-level="3.7.2" data-path="preparing-landscape-data.html"><a href="preparing-landscape-data.html#load-resampled-environmental-rasters"><i class="fa fa-check"></i><b>3.7.2</b> Load resampled environmental rasters</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="preparing-landscape-data.html"><a href="preparing-landscape-data.html#land-cover-type-in-relation-to-elevation"><i class="fa fa-check"></i><b>3.8</b> Land cover type in relation to elevation</a></li>
<li class="chapter" data-level="3.9" data-path="preparing-landscape-data.html"><a href="preparing-landscape-data.html#main-text-figure-2"><i class="fa fa-check"></i><b>3.9</b> Main Text Figure 2</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html"><i class="fa fa-check"></i><b>4</b> Examining Spatial Sampling Bias</a><ul>
<li class="chapter" data-level="4.1" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#prepare-libraries-1"><i class="fa fa-check"></i><b>4.1</b> Prepare libraries</a></li>
<li class="chapter" data-level="4.2" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#prepare-data-for-processing"><i class="fa fa-check"></i><b>4.2</b> Prepare data for processing</a><ul>
<li class="chapter" data-level="4.2.1" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#python-functions-and-distance-calculations"><i class="fa fa-check"></i><b>4.2.1</b> Python functions and distance calculations</a></li>
<li class="chapter" data-level="4.2.2" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#spatially-explicit-filter-on-checklists"><i class="fa fa-check"></i><b>4.2.2</b> Spatially explicit filter on checklists</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#main-text-figure-3"><i class="fa fa-check"></i><b>4.3</b> Main Text Figure 3</a><ul>
<li class="chapter" data-level="4.3.1" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#prepare-histogram-of-distance-to-roads"><i class="fa fa-check"></i><b>4.3.1</b> Prepare histogram of distance to roads</a></li>
<li class="chapter" data-level="4.3.2" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#table-distance-to-roads"><i class="fa fa-check"></i><b>4.3.2</b> Table: Distance to roads</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#distance-to-nearest-neighbouring-site"><i class="fa fa-check"></i><b>4.4</b> Distance to nearest neighbouring site</a></li>
<li class="chapter" data-level="4.5" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#main-text-figure-3-1"><i class="fa fa-check"></i><b>4.5</b> Main Text Figure 3</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="preparing-observer-expertise-scores.html"><a href="preparing-observer-expertise-scores.html"><i class="fa fa-check"></i><b>5</b> Preparing Observer Expertise Scores</a><ul>
<li class="chapter" data-level="5.1" data-path="preparing-observer-expertise-scores.html"><a href="preparing-observer-expertise-scores.html#prepare-libraries-2"><i class="fa fa-check"></i><b>5.1</b> Prepare libraries</a></li>
<li class="chapter" data-level="5.2" data-path="preparing-observer-expertise-scores.html"><a href="preparing-observer-expertise-scores.html#prepare-data"><i class="fa fa-check"></i><b>5.2</b> Prepare data</a></li>
<li class="chapter" data-level="5.3" data-path="preparing-observer-expertise-scores.html"><a href="preparing-observer-expertise-scores.html#spatially-explicit-filter-on-checklists-1"><i class="fa fa-check"></i><b>5.3</b> Spatially explicit filter on checklists</a></li>
<li class="chapter" data-level="5.4" data-path="preparing-observer-expertise-scores.html"><a href="preparing-observer-expertise-scores.html#prepare-species-of-interest"><i class="fa fa-check"></i><b>5.4</b> Prepare species of interest</a></li>
<li class="chapter" data-level="5.5" data-path="preparing-observer-expertise-scores.html"><a href="preparing-observer-expertise-scores.html#prepare-checklists-for-observer-score"><i class="fa fa-check"></i><b>5.5</b> Prepare checklists for observer score</a></li>
<li class="chapter" data-level="5.6" data-path="preparing-observer-expertise-scores.html"><a href="preparing-observer-expertise-scores.html#get-landcover"><i class="fa fa-check"></i><b>5.6</b> Get landcover</a></li>
<li class="chapter" data-level="5.7" data-path="preparing-observer-expertise-scores.html"><a href="preparing-observer-expertise-scores.html#filter-checklist-data"><i class="fa fa-check"></i><b>5.7</b> Filter checklist data</a></li>
<li class="chapter" data-level="5.8" data-path="preparing-observer-expertise-scores.html"><a href="preparing-observer-expertise-scores.html#model-observer-expertise"><i class="fa fa-check"></i><b>5.8</b> Model observer expertise</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html"><i class="fa fa-check"></i><b>6</b> Adding Covariates to Checklist Data</a><ul>
<li class="chapter" data-level="6.1" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#prepare-libraries-and-data"><i class="fa fa-check"></i><b>6.1</b> Prepare libraries and data</a></li>
<li class="chapter" data-level="6.2" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#spatial-subsampling"><i class="fa fa-check"></i><b>6.2</b> Spatial subsampling</a></li>
<li class="chapter" data-level="6.3" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#temporal-subsampling"><i class="fa fa-check"></i><b>6.3</b> Temporal subsampling</a></li>
<li class="chapter" data-level="6.4" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#add-checklist-calibration-index"><i class="fa fa-check"></i><b>6.4</b> Add checklist calibration index</a></li>
<li class="chapter" data-level="6.5" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#add-landscape-covariates"><i class="fa fa-check"></i><b>6.5</b> Add landscape covariates</a></li>
<li class="chapter" data-level="6.6" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#spatial-buffers-around-selected-checklists"><i class="fa fa-check"></i><b>6.6</b> Spatial buffers around selected checklists</a></li>
<li class="chapter" data-level="6.7" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#spatial-buffer-wide-covariates"><i class="fa fa-check"></i><b>6.7</b> Spatial buffer-wide covariates</a><ul>
<li class="chapter" data-level="6.7.1" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#mean-environmental-covariates"><i class="fa fa-check"></i><b>6.7.1</b> Mean environmental covariates</a></li>
<li class="chapter" data-level="6.7.2" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#proportions-of-land-cover-type"><i class="fa fa-check"></i><b>6.7.2</b> Proportions of land cover type</a></li>
<li class="chapter" data-level="6.7.3" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#link-landscape-covariates-to-checklists"><i class="fa fa-check"></i><b>6.7.3</b> Link landscape covariates to checklists</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html"><i class="fa fa-check"></i><b>7</b> Modelling Species Occupancy</a><ul>
<li class="chapter" data-level="7.0.1" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#load-necessary-libraries"><i class="fa fa-check"></i><b>7.0.1</b> Load necessary libraries</a></li>
<li class="chapter" data-level="7.1" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#load-dataframe-and-scale-covariates"><i class="fa fa-check"></i><b>7.1</b> Load dataframe and scale covariates</a></li>
<li class="chapter" data-level="7.2" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#running-a-null-model"><i class="fa fa-check"></i><b>7.2</b> Running a null model</a></li>
<li class="chapter" data-level="7.3" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#identifying-covariates-necessary-to-model-the-detection-process"><i class="fa fa-check"></i><b>7.3</b> Identifying covariates necessary to model the detection process</a></li>
<li class="chapter" data-level="7.4" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#land-cover-and-climate"><i class="fa fa-check"></i><b>7.4</b> Land Cover and Climate</a></li>
<li class="chapter" data-level="7.5" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#goodness-of-fit-tests"><i class="fa fa-check"></i><b>7.5</b> Goodness-of-fit tests</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html"><i class="fa fa-check"></i><b>8</b> Visualizing Occupancy Predictor Effects</a><ul>
<li class="chapter" data-level="8.1" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html#prepare-libraries-3"><i class="fa fa-check"></i><b>8.1</b> Prepare libraries</a></li>
<li class="chapter" data-level="8.2" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html#load-species-list"><i class="fa fa-check"></i><b>8.2</b> Load species list</a></li>
<li class="chapter" data-level="8.3" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html#show-aic-weight-importance"><i class="fa fa-check"></i><b>8.3</b> Show AIC weight importance</a><ul>
<li class="chapter" data-level="8.3.1" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html#read-in-aic-weight-data"><i class="fa fa-check"></i><b>8.3.1</b> Read in AIC weight data</a></li>
<li class="chapter" data-level="8.3.2" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html#prepare-cumulative-aic-weight-data"><i class="fa fa-check"></i><b>8.3.2</b> Prepare cumulative AIC weight data</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html#prepare-model-coefficient-data"><i class="fa fa-check"></i><b>8.4</b> Prepare model coefficient data</a></li>
<li class="chapter" data-level="8.5" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html#get-predictor-effects"><i class="fa fa-check"></i><b>8.5</b> Get predictor effects</a></li>
<li class="chapter" data-level="8.6" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html#main-text-figure-4"><i class="fa fa-check"></i><b>8.6</b> Main Text Figure 4</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Using citizen science to parse climatic and landcover influences on bird occupancy within a tropical biodiversity hotspot</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="preparing-landscape-data" class="section level1">
<h1><span class="header-section-number">Section 3</span> Preparing Landscape Data</h1>
<p>Here, we prepare environmental layers which we have accessed as raster images from remote sensing platforms using Google Earth Engine.
The GEE code can be found in a separate file.
The goal here is to resample all rasters so that they have the same resolution of 1km cells.</p>
<div id="prepare-libraries" class="section level2">
<h2><span class="header-section-number">3.1</span> Prepare libraries</h2>
<p>We load some common libraries for raster processing and define a custom mode function.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1"></a>
<a class="sourceLine" id="cb14-2" title="2"><span class="co"># load libs</span></a>
<a class="sourceLine" id="cb14-3" title="3"><span class="kw">library</span>(raster)</a>
<a class="sourceLine" id="cb14-4" title="4"><span class="kw">library</span>(stringi)</a>
<a class="sourceLine" id="cb14-5" title="5"><span class="kw">library</span>(glue)</a>
<a class="sourceLine" id="cb14-6" title="6"><span class="kw">library</span>(gdalUtils)</a>
<a class="sourceLine" id="cb14-7" title="7"><span class="kw">library</span>(purrr)</a>
<a class="sourceLine" id="cb14-8" title="8"></a>
<a class="sourceLine" id="cb14-9" title="9"><span class="co"># prep mode function to aggregate</span></a>
<a class="sourceLine" id="cb14-10" title="10">funcMode &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">na.rm =</span> T) {</a>
<a class="sourceLine" id="cb14-11" title="11">  ux &lt;-<span class="st"> </span><span class="kw">unique</span>(x)</a>
<a class="sourceLine" id="cb14-12" title="12">  ux[<span class="kw">which.max</span>(<span class="kw">tabulate</span>(<span class="kw">match</span>(x, ux)))]</a>
<a class="sourceLine" id="cb14-13" title="13">}</a>
<a class="sourceLine" id="cb14-14" title="14"></a>
<a class="sourceLine" id="cb14-15" title="15"><span class="co"># a basic test</span></a>
<a class="sourceLine" id="cb14-16" title="16">assertthat<span class="op">::</span><span class="kw">assert_that</span>(<span class="kw">funcMode</span>(<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">4</span>)) <span class="op">==</span><span class="st"> </span><span class="kw">as.character</span>(<span class="dv">2</span>),</a>
<a class="sourceLine" id="cb14-17" title="17">  <span class="dt">msg =</span> <span class="st">&quot;problem in the mode function&quot;</span></a>
<a class="sourceLine" id="cb14-18" title="18">) <span class="co"># works</span></a></code></pre></div>
</div>
<div id="prepare-spatial-extent" class="section level2">
<h2><span class="header-section-number">3.2</span> Prepare spatial extent</h2>
<p>We prepare a 30km buffer around the boundary of the study area. This buffer will be used to mask the landscape rasters.
The buffer procedure is done on data transformed to the UTM 43N CRS to avoid distortions.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1"><span class="co"># load hills</span></a>
<a class="sourceLine" id="cb15-2" title="2"><span class="kw">library</span>(sf)</a>
<a class="sourceLine" id="cb15-3" title="3">hills &lt;-<span class="st"> </span><span class="kw">st_read</span>(<span class="st">&quot;data/spatial/hillsShapefile/Nil_Ana_Pal.shp&quot;</span>)</a>
<a class="sourceLine" id="cb15-4" title="4">hills &lt;-<span class="st"> </span><span class="kw">st_transform</span>(hills, <span class="dv">32643</span>)</a>
<a class="sourceLine" id="cb15-5" title="5">buffer &lt;-<span class="st"> </span><span class="kw">st_buffer</span>(hills, <span class="fl">3e4</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-6" title="6"><span class="st">  </span><span class="kw">st_transform</span>(<span class="dv">4326</span>)</a></code></pre></div>
</div>
<div id="prepare-terrain-rasters" class="section level2">
<h2><span class="header-section-number">3.3</span> Prepare terrain rasters</h2>
<p>We prepare the elevation data which is an SRTM raster layer, and derive the slope and aspect from it after cropping it to the extent of the study site buffer.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1"><span class="co"># load elevation and crop to hills size, then mask by hills</span></a>
<a class="sourceLine" id="cb16-2" title="2">alt &lt;-<span class="st"> </span><span class="kw">raster</span>(<span class="st">&quot;data/spatial/Elevation/alt&quot;</span>)</a>
<a class="sourceLine" id="cb16-3" title="3">alt.hills &lt;-<span class="st"> </span><span class="kw">crop</span>(alt, <span class="kw">as</span>(buffer, <span class="st">&quot;Spatial&quot;</span>))</a>
<a class="sourceLine" id="cb16-4" title="4"><span class="kw">rm</span>(alt)</a>
<a class="sourceLine" id="cb16-5" title="5"><span class="kw">gc</span>()</a>
<a class="sourceLine" id="cb16-6" title="6"></a>
<a class="sourceLine" id="cb16-7" title="7"><span class="co"># get slope and aspect</span></a>
<a class="sourceLine" id="cb16-8" title="8">slopeData &lt;-<span class="st"> </span><span class="kw">terrain</span>(<span class="dt">x =</span> alt.hills, <span class="dt">opt =</span> <span class="kw">c</span>(<span class="st">&quot;slope&quot;</span>, <span class="st">&quot;aspect&quot;</span>))</a>
<a class="sourceLine" id="cb16-9" title="9">elevData &lt;-<span class="st"> </span>raster<span class="op">::</span><span class="kw">stack</span>(alt.hills, slopeData)</a>
<a class="sourceLine" id="cb16-10" title="10"><span class="kw">rm</span>(alt.hills)</a>
<a class="sourceLine" id="cb16-11" title="11"><span class="kw">gc</span>()</a></code></pre></div>
</div>
<div id="prepare-chelsa-rasters" class="section level2">
<h2><span class="header-section-number">3.4</span> Prepare CHELSA rasters</h2>
<p>We prepare the CHELSA rasters for annual temperature and annual precipitation in the same way, reading them in, cropping them to the study site buffer extent, and handling the temperature layer values which we divide by 10.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1"><span class="co"># list chelsa files</span></a>
<a class="sourceLine" id="cb17-2" title="2">chelsaFiles &lt;-<span class="st"> </span><span class="kw">list.files</span>(<span class="st">&quot;data/chelsa/&quot;</span>,</a>
<a class="sourceLine" id="cb17-3" title="3">  <span class="dt">full.names =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb17-4" title="4">  <span class="dt">pattern =</span> <span class="st">&quot;*.tif&quot;</span></a>
<a class="sourceLine" id="cb17-5" title="5">)</a>
<a class="sourceLine" id="cb17-6" title="6"></a>
<a class="sourceLine" id="cb17-7" title="7"><span class="co"># gather chelsa rasters</span></a>
<a class="sourceLine" id="cb17-8" title="8">chelsaData &lt;-<span class="st"> </span>purrr<span class="op">::</span><span class="kw">map</span>(chelsaFiles, <span class="cf">function</span>(chr) {</a>
<a class="sourceLine" id="cb17-9" title="9">  a &lt;-<span class="st"> </span><span class="kw">raster</span>(chr)</a>
<a class="sourceLine" id="cb17-10" title="10">  <span class="kw">crs</span>(a) &lt;-<span class="st"> </span><span class="kw">crs</span>(elevData)</a>
<a class="sourceLine" id="cb17-11" title="11">  a &lt;-<span class="st"> </span><span class="kw">crop</span>(a, <span class="kw">as</span>(buffer, <span class="st">&quot;Spatial&quot;</span>))</a>
<a class="sourceLine" id="cb17-12" title="12">  <span class="kw">return</span>(a)</a>
<a class="sourceLine" id="cb17-13" title="13">})</a>
<a class="sourceLine" id="cb17-14" title="14"></a>
<a class="sourceLine" id="cb17-15" title="15"><span class="co"># divide temperature by 10</span></a>
<a class="sourceLine" id="cb17-16" title="16">chelsaData[[<span class="dv">1</span>]] &lt;-<span class="st"> </span>chelsaData[[<span class="dv">1</span>]] <span class="op">/</span><span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb17-17" title="17"></a>
<a class="sourceLine" id="cb17-18" title="18"><span class="co"># stack chelsa data</span></a>
<a class="sourceLine" id="cb17-19" title="19">chelsaData &lt;-<span class="st"> </span>raster<span class="op">::</span><span class="kw">stack</span>(chelsaData)</a></code></pre></div>
<p>We stack the terrain and climatic rasters.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1"><span class="co"># stack rasters for efficient reprojection later</span></a>
<a class="sourceLine" id="cb18-2" title="2">env_data &lt;-<span class="st"> </span><span class="kw">stack</span>(elevData, chelsaData)</a></code></pre></div>
</div>
<div id="resample-landcover-from-10m-to-1km" class="section level2">
<h2><span class="header-section-number">3.5</span> Resample landcover from 10m to 1km</h2>
<p>We read in a land cover classified image and resample that using the mode function to a 1km resolution.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" title="1"><span class="co"># read in landcover raster location</span></a>
<a class="sourceLine" id="cb19-2" title="2">landcover &lt;-<span class="st"> &quot;data/landUseClassification/Reprojected Image_26thJan2020_UTM_Ghats.tif&quot;</span></a>
<a class="sourceLine" id="cb19-3" title="3"></a>
<a class="sourceLine" id="cb19-4" title="4"><span class="co"># get extent</span></a>
<a class="sourceLine" id="cb19-5" title="5">e &lt;-<span class="st"> </span><span class="kw">bbox</span>(<span class="kw">raster</span>(landcover))</a>
<a class="sourceLine" id="cb19-6" title="6"></a>
<a class="sourceLine" id="cb19-7" title="7"><span class="co"># init resolution</span></a>
<a class="sourceLine" id="cb19-8" title="8">res_init &lt;-<span class="st"> </span><span class="kw">res</span>(<span class="kw">raster</span>(landcover))</a>
<a class="sourceLine" id="cb19-9" title="9"></a>
<a class="sourceLine" id="cb19-10" title="10"><span class="co"># res to transform to 1000m</span></a>
<a class="sourceLine" id="cb19-11" title="11">res_final &lt;-<span class="st"> </span>res_init <span class="op">*</span><span class="st"> </span><span class="dv">100</span></a>
<a class="sourceLine" id="cb19-12" title="12"></a>
<a class="sourceLine" id="cb19-13" title="13"><span class="co"># use gdalutils gdalwarp for resampling transform</span></a>
<a class="sourceLine" id="cb19-14" title="14"><span class="co"># to 1km from 10m</span></a>
<a class="sourceLine" id="cb19-15" title="15">gdalUtils<span class="op">::</span><span class="kw">gdalwarp</span>(</a>
<a class="sourceLine" id="cb19-16" title="16">  <span class="dt">srcfile =</span> landcover,</a>
<a class="sourceLine" id="cb19-17" title="17">  <span class="dt">dstfile =</span> <span class="st">&quot;data/landUseClassification/lc_01000m.tif&quot;</span>,</a>
<a class="sourceLine" id="cb19-18" title="18">  <span class="dt">tr =</span> <span class="kw">c</span>(res_final), <span class="dt">r =</span> <span class="st">&quot;mode&quot;</span>, <span class="dt">te =</span> <span class="kw">c</span>(e)</a>
<a class="sourceLine" id="cb19-19" title="19">)</a></code></pre></div>
<p>We compare the frequency of landcover classes between the original 10m and the resampled 1km raster to be certain that the resampling has not resulted in drastic misrepresentation of the frequency of any landcover type. This comparison is made using the figure below.</p>
</div>
<div id="resample-other-rasters-to-1km" class="section level2">
<h2><span class="header-section-number">3.6</span> Resample other rasters to 1km</h2>
<p>We now resample all other rasters to a resolution of 1km.</p>
<div id="read-in-resampled-landcover" class="section level3">
<h3><span class="header-section-number">3.6.1</span> Read in resampled landcover</h3>
<p>Here, we read in the 1km landcover raster and set 0 to NA.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1">lc_data &lt;-<span class="st"> </span><span class="kw">raster</span>(<span class="st">&quot;data/landUseClassification/lc_01000m.tif&quot;</span>)</a>
<a class="sourceLine" id="cb20-2" title="2">lc_data[lc_data <span class="op">==</span><span class="st"> </span><span class="dv">0</span>] &lt;-<span class="st"> </span><span class="ot">NA</span></a></code></pre></div>
</div>
<div id="reproject-environmental-data-using-landcover-as-a-template" class="section level3">
<h3><span class="header-section-number">3.6.2</span> Reproject environmental data using landcover as a template</h3>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" title="1"></a>
<a class="sourceLine" id="cb21-2" title="2"><span class="co"># resample to the corresponding landcover data</span></a>
<a class="sourceLine" id="cb21-3" title="3">env_data_resamp &lt;-<span class="st"> </span><span class="kw">projectRaster</span>(</a>
<a class="sourceLine" id="cb21-4" title="4">  <span class="dt">from =</span> env_data, <span class="dt">to =</span> lc_data,</a>
<a class="sourceLine" id="cb21-5" title="5">  <span class="dt">crs =</span> <span class="kw">crs</span>(lc_data), <span class="dt">res =</span> <span class="kw">res</span>(lc_data)</a>
<a class="sourceLine" id="cb21-6" title="6">)</a>
<a class="sourceLine" id="cb21-7" title="7"></a>
<a class="sourceLine" id="cb21-8" title="8"><span class="co"># export as raster stack</span></a>
<a class="sourceLine" id="cb21-9" title="9">land_stack &lt;-<span class="st"> </span><span class="kw">stack</span>(env_data_resamp, lc_data)</a>
<a class="sourceLine" id="cb21-10" title="10"></a>
<a class="sourceLine" id="cb21-11" title="11"><span class="co"># get names</span></a>
<a class="sourceLine" id="cb21-12" title="12">land_names &lt;-<span class="st"> </span><span class="kw">glue</span>(<span class="st">&#39;data/spatial/landscape_resamp{c(&quot;01&quot;)}_km.tif&#39;</span>)</a>
<a class="sourceLine" id="cb21-13" title="13"></a>
<a class="sourceLine" id="cb21-14" title="14"><span class="co"># write to file</span></a>
<a class="sourceLine" id="cb21-15" title="15"><span class="kw">writeRaster</span>(land_stack, <span class="dt">filename =</span> <span class="kw">as.character</span>(land_names), <span class="dt">overwrite =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
</div>
</div>
<div id="temperature-and-rainfall-in-relation-to-elevation" class="section level2">
<h2><span class="header-section-number">3.7</span> Temperature and rainfall in relation to elevation</h2>
<div id="prepare-libraries-and-ci-function" class="section level3">
<h3><span class="header-section-number">3.7.1</span> Prepare libraries and CI function</h3>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" title="1"><span class="co"># load libs</span></a>
<a class="sourceLine" id="cb22-2" title="2"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb22-3" title="3"><span class="kw">library</span>(tidyr)</a>
<a class="sourceLine" id="cb22-4" title="4"></a>
<a class="sourceLine" id="cb22-5" title="5"><span class="kw">library</span>(scales)</a>
<a class="sourceLine" id="cb22-6" title="6"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb22-7" title="7"></a>
<a class="sourceLine" id="cb22-8" title="8"><span class="co"># get ci func</span></a>
<a class="sourceLine" id="cb22-9" title="9">ci &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb22-10" title="10">  <span class="kw">qnorm</span>(<span class="fl">0.975</span>) <span class="op">*</span><span class="st"> </span><span class="kw">sd</span>(x, <span class="dt">na.rm =</span> T) <span class="op">/</span><span class="st"> </span><span class="kw">sqrt</span>(<span class="kw">length</span>(x))</a>
<a class="sourceLine" id="cb22-11" title="11">}</a></code></pre></div>
</div>
<div id="load-resampled-environmental-rasters" class="section level3">
<h3><span class="header-section-number">3.7.2</span> Load resampled environmental rasters</h3>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" title="1"><span class="co"># read landscape prepare for plotting</span></a>
<a class="sourceLine" id="cb23-2" title="2">landscape &lt;-<span class="st"> </span><span class="kw">stack</span>(<span class="st">&quot;data/spatial/landscape_resamp01_km.tif&quot;</span>)</a>
<a class="sourceLine" id="cb23-3" title="3"></a>
<a class="sourceLine" id="cb23-4" title="4"><span class="co"># get proper names</span></a>
<a class="sourceLine" id="cb23-5" title="5">elev_names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;elev&quot;</span>, <span class="st">&quot;slope&quot;</span>, <span class="st">&quot;aspect&quot;</span>)</a>
<a class="sourceLine" id="cb23-6" title="6">chelsa_names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;bio_01&quot;</span>, <span class="st">&quot;bio_12&quot;</span>)</a>
<a class="sourceLine" id="cb23-7" title="7"></a>
<a class="sourceLine" id="cb23-8" title="8"><span class="kw">names</span>(landscape) &lt;-<span class="st"> </span><span class="kw">as.character</span>(<span class="kw">glue</span>(<span class="st">&#39;{c(elev_names, chelsa_names, &quot;landcover&quot;)}&#39;</span>))</a></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" title="1"><span class="co"># make duplicate stack</span></a>
<a class="sourceLine" id="cb24-2" title="2">land_data &lt;-<span class="st"> </span>landscape[[<span class="kw">c</span>(<span class="st">&quot;elev&quot;</span>, chelsa_names)]]</a>
<a class="sourceLine" id="cb24-3" title="3"></a>
<a class="sourceLine" id="cb24-4" title="4"><span class="co"># convert to list</span></a>
<a class="sourceLine" id="cb24-5" title="5">land_data &lt;-<span class="st"> </span><span class="kw">as.list</span>(land_data)</a>
<a class="sourceLine" id="cb24-6" title="6"></a>
<a class="sourceLine" id="cb24-7" title="7"><span class="co"># map get values over the stack</span></a>
<a class="sourceLine" id="cb24-8" title="8">land_data &lt;-<span class="st"> </span>purrr<span class="op">::</span><span class="kw">map</span>(land_data, getValues)</a>
<a class="sourceLine" id="cb24-9" title="9"><span class="kw">names</span>(land_data) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;elev&quot;</span>, chelsa_names)</a>
<a class="sourceLine" id="cb24-10" title="10"></a>
<a class="sourceLine" id="cb24-11" title="11"><span class="co"># conver to dataframe and round to 100m</span></a>
<a class="sourceLine" id="cb24-12" title="12">land_data &lt;-<span class="st"> </span><span class="kw">bind_cols</span>(land_data)</a>
<a class="sourceLine" id="cb24-13" title="13">land_data &lt;-<span class="st"> </span><span class="kw">drop_na</span>(land_data) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb24-14" title="14"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">elev_round =</span> plyr<span class="op">::</span><span class="kw">round_any</span>(elev, <span class="dv">200</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb24-15" title="15"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(<span class="op">-</span>elev) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb24-16" title="16"><span class="st">  </span><span class="kw">pivot_longer</span>(</a>
<a class="sourceLine" id="cb24-17" title="17">    <span class="dt">cols =</span> <span class="kw">contains</span>(<span class="st">&quot;bio&quot;</span>),</a>
<a class="sourceLine" id="cb24-18" title="18">    <span class="dt">names_to =</span> <span class="st">&quot;clim_var&quot;</span></a>
<a class="sourceLine" id="cb24-19" title="19">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb24-20" title="20"><span class="st">  </span><span class="kw">group_by</span>(elev_round, clim_var) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb24-21" title="21"><span class="st">  </span><span class="kw">summarise_all</span>(<span class="dt">.funs =</span> <span class="kw">list</span>(<span class="op">~</span><span class="st"> </span><span class="kw">mean</span>(.), <span class="op">~</span><span class="st"> </span><span class="kw">ci</span>(.)))</a></code></pre></div>
<p>Figure code is hidden in versions rendered as HTML or PDF.</p>
</div>
</div>
<div id="land-cover-type-in-relation-to-elevation" class="section level2">
<h2><span class="header-section-number">3.8</span> Land cover type in relation to elevation</h2>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" title="1"><span class="co"># get data from landscape rasters</span></a>
<a class="sourceLine" id="cb25-2" title="2">lc_elev &lt;-<span class="st"> </span><span class="kw">tibble</span>(</a>
<a class="sourceLine" id="cb25-3" title="3">  <span class="dt">elev =</span> <span class="kw">getValues</span>(landscape[[<span class="st">&quot;elev&quot;</span>]]),</a>
<a class="sourceLine" id="cb25-4" title="4">  <span class="dt">landcover =</span> <span class="kw">getValues</span>(landscape[[<span class="st">&quot;landcover&quot;</span>]])</a>
<a class="sourceLine" id="cb25-5" title="5">)</a>
<a class="sourceLine" id="cb25-6" title="6"></a>
<a class="sourceLine" id="cb25-7" title="7"><span class="co"># process data for proportions</span></a>
<a class="sourceLine" id="cb25-8" title="8">lc_elev &lt;-<span class="st"> </span>lc_elev <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb25-9" title="9"><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(landcover), <span class="op">!</span><span class="kw">is.na</span>(elev)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb25-10" title="10"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">elev =</span> plyr<span class="op">::</span><span class="kw">round_any</span>(elev, <span class="dv">100</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb25-11" title="11"><span class="st">  </span><span class="kw">count</span>(elev, landcover) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb25-12" title="12"><span class="st">  </span><span class="kw">group_by</span>(elev) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb25-13" title="13"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">prop =</span> n <span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(n))</a>
<a class="sourceLine" id="cb25-14" title="14"></a>
<a class="sourceLine" id="cb25-15" title="15"><span class="co"># fill out lc elev</span></a>
<a class="sourceLine" id="cb25-16" title="16">lc_elev_canon &lt;-<span class="st"> </span><span class="kw">crossing</span>(</a>
<a class="sourceLine" id="cb25-17" title="17">  <span class="dt">elev =</span> <span class="kw">unique</span>(lc_elev<span class="op">$</span>elev),</a>
<a class="sourceLine" id="cb25-18" title="18">  <span class="dt">landcover =</span> <span class="kw">unique</span>(lc_elev<span class="op">$</span>landcover)</a>
<a class="sourceLine" id="cb25-19" title="19">)</a>
<a class="sourceLine" id="cb25-20" title="20"></a>
<a class="sourceLine" id="cb25-21" title="21"><span class="co"># bind with lcelev</span></a>
<a class="sourceLine" id="cb25-22" title="22">lc_elev &lt;-<span class="st"> </span><span class="kw">full_join</span>(lc_elev, lc_elev_canon)</a>
<a class="sourceLine" id="cb25-23" title="23"></a>
<a class="sourceLine" id="cb25-24" title="24"><span class="co"># convert NA to zero</span></a>
<a class="sourceLine" id="cb25-25" title="25">lc_elev &lt;-<span class="st"> </span><span class="kw">replace_na</span>(lc_elev, <span class="dt">replace =</span> <span class="kw">list</span>(<span class="dt">n =</span> <span class="dv">0</span>, <span class="dt">prop =</span> <span class="dv">0</span>))</a></code></pre></div>
<p>Figure code is hidden in versions rendered as HTML and PDF.</p>
</div>
<div id="main-text-figure-2" class="section level2">
<h2><span class="header-section-number">3.9</span> Main Text Figure 2</h2>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" title="1"><span class="kw">library</span>(patchwork)</a></code></pre></div>
<p><img src="figs/fig_02_clim_lc_elev.png" /></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="preparing-ebird-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="examining-spatial-sampling-bias.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/pratikunterwegs/eBirdOccupancy/edit/master/02_prep-landscape-data.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
