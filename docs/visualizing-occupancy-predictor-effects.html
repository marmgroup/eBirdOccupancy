<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 9 Visualizing Occupancy Predictor Effects | Source code for Using citizen science to parse climatic and landcover influences on bird occupancy within a tropical biodiversity hotspot</title>
  <meta name="description" content="Section 9 Visualizing Occupancy Predictor Effects | Source code for Using citizen science to parse climatic and landcover influences on bird occupancy within a tropical biodiversity hotspot" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 9 Visualizing Occupancy Predictor Effects | Source code for Using citizen science to parse climatic and landcover influences on bird occupancy within a tropical biodiversity hotspot" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="pratikunterwegs/eBirdOccupancy" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 9 Visualizing Occupancy Predictor Effects | Source code for Using citizen science to parse climatic and landcover influences on bird occupancy within a tropical biodiversity hotspot" />
  
  
  

<meta name="author" content="Vijay Ramesh" />
<meta name="author" content="Pratik R. Gupte" />
<meta name="author" content="Morgan W. Tingley" />
<meta name="author" content="VV Robin" />
<meta name="author" content="Ruth DeFries" />


<meta name="date" content="2021-08-22" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="modelling-species-occupancy.html"/>
<link rel="next" href="references.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#attribution"><i class="fa fa-check"></i><b>1.1</b> Attribution</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#data-access"><i class="fa fa-check"></i><b>1.2</b> Data access</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#data-processing"><i class="fa fa-check"></i><b>1.3</b> Data processing</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#main-text-figure-1"><i class="fa fa-check"></i><b>1.4</b> Main Text Figure 1</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="preparing-ebird-data.html"><a href="preparing-ebird-data.html"><i class="fa fa-check"></i><b>2</b> Preparing eBird Data</a><ul>
<li class="chapter" data-level="2.1" data-path="preparing-ebird-data.html"><a href="preparing-ebird-data.html#prepare-libraries-and-data-sources"><i class="fa fa-check"></i><b>2.1</b> Prepare libraries and data sources</a></li>
<li class="chapter" data-level="2.2" data-path="preparing-ebird-data.html"><a href="preparing-ebird-data.html#filter-data"><i class="fa fa-check"></i><b>2.2</b> Filter data</a></li>
<li class="chapter" data-level="2.3" data-path="preparing-ebird-data.html"><a href="preparing-ebird-data.html#process-filtered-data"><i class="fa fa-check"></i><b>2.3</b> Process filtered data</a></li>
<li class="chapter" data-level="2.4" data-path="preparing-ebird-data.html"><a href="preparing-ebird-data.html#spatial-filter"><i class="fa fa-check"></i><b>2.4</b> Spatial filter</a></li>
<li class="chapter" data-level="2.5" data-path="preparing-ebird-data.html"><a href="preparing-ebird-data.html#handle-presence-data"><i class="fa fa-check"></i><b>2.5</b> Handle presence data</a></li>
<li class="chapter" data-level="2.6" data-path="preparing-ebird-data.html"><a href="preparing-ebird-data.html#add-decimal-time"><i class="fa fa-check"></i><b>2.6</b> Add decimal time</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html"><i class="fa fa-check"></i><b>3</b> Preparing Environmental Predictors</a><ul>
<li class="chapter" data-level="3.1" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#prepare-libraries"><i class="fa fa-check"></i><b>3.1</b> Prepare libraries</a></li>
<li class="chapter" data-level="3.2" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#prepare-spatial-extent"><i class="fa fa-check"></i><b>3.2</b> Prepare spatial extent</a></li>
<li class="chapter" data-level="3.3" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#prepare-terrain-rasters"><i class="fa fa-check"></i><b>3.3</b> Prepare terrain rasters</a></li>
<li class="chapter" data-level="3.4" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#prepare-bioclim-4a-and-bioclim-15"><i class="fa fa-check"></i><b>3.4</b> Prepare Bioclim 4a and Bioclim 15</a></li>
<li class="chapter" data-level="3.5" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#prepare-chelsa-rasters"><i class="fa fa-check"></i><b>3.5</b> Prepare CHELSA rasters</a><ul>
<li class="chapter" data-level="3.5.1" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#prepare-bioclim-4a-and-15"><i class="fa fa-check"></i><b>3.5.1</b> Prepare BIOCLIM 4a and 15</a></li>
<li class="chapter" data-level="3.5.2" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#prepare-bioclim-4a"><i class="fa fa-check"></i><b>3.5.2</b> Prepare BIOCLIM 4a</a></li>
<li class="chapter" data-level="3.5.3" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#prepare-bioclim-15"><i class="fa fa-check"></i><b>3.5.3</b> Prepare Bioclim 15</a></li>
<li class="chapter" data-level="3.5.4" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#stack-terrain-and-climate"><i class="fa fa-check"></i><b>3.5.4</b> Stack terrain and climate</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#resample-landcover-from-10m-to-1km"><i class="fa fa-check"></i><b>3.6</b> Resample landcover from 10m to 1km</a></li>
<li class="chapter" data-level="3.7" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#resample-other-rasters-to-1km"><i class="fa fa-check"></i><b>3.7</b> Resample other rasters to 1km</a><ul>
<li class="chapter" data-level="3.7.1" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#read-in-resampled-landcover"><i class="fa fa-check"></i><b>3.7.1</b> Read in resampled landcover</a></li>
<li class="chapter" data-level="3.7.2" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#reproject-environmental-data-using-landcover-as-a-template"><i class="fa fa-check"></i><b>3.7.2</b> Reproject environmental data using landcover as a template</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#climate-seasonality-in-relation-to-elevation"><i class="fa fa-check"></i><b>3.8</b> Climate seasonality in relation to elevation</a><ul>
<li class="chapter" data-level="3.8.1" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#load-resampled-environmental-rasters"><i class="fa fa-check"></i><b>3.8.1</b> Load resampled environmental rasters</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#climate-seasonality-across-land-cover-types"><i class="fa fa-check"></i><b>3.9</b> Climate seasonality across land cover types</a></li>
<li class="chapter" data-level="3.10" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#land-cover-type-in-relation-to-elevation"><i class="fa fa-check"></i><b>3.10</b> Land cover type in relation to elevation</a></li>
<li class="chapter" data-level="3.11" data-path="preparing-environmental-predictors.html"><a href="preparing-environmental-predictors.html#main-text-figure-2"><i class="fa fa-check"></i><b>3.11</b> Main Text Figure 2</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="preparing-observer-expertise-scores.html"><a href="preparing-observer-expertise-scores.html"><i class="fa fa-check"></i><b>4</b> Preparing Observer Expertise Scores</a><ul>
<li class="chapter" data-level="4.1" data-path="preparing-observer-expertise-scores.html"><a href="preparing-observer-expertise-scores.html#prepare-libraries-1"><i class="fa fa-check"></i><b>4.1</b> Prepare libraries</a></li>
<li class="chapter" data-level="4.2" data-path="preparing-observer-expertise-scores.html"><a href="preparing-observer-expertise-scores.html#prepare-data"><i class="fa fa-check"></i><b>4.2</b> Prepare data</a></li>
<li class="chapter" data-level="4.3" data-path="preparing-observer-expertise-scores.html"><a href="preparing-observer-expertise-scores.html#spatially-explicit-filter-on-checklists"><i class="fa fa-check"></i><b>4.3</b> Spatially explicit filter on checklists</a></li>
<li class="chapter" data-level="4.4" data-path="preparing-observer-expertise-scores.html"><a href="preparing-observer-expertise-scores.html#prepare-species-of-interest"><i class="fa fa-check"></i><b>4.4</b> Prepare species of interest</a></li>
<li class="chapter" data-level="4.5" data-path="preparing-observer-expertise-scores.html"><a href="preparing-observer-expertise-scores.html#prepare-checklists-for-observer-score"><i class="fa fa-check"></i><b>4.5</b> Prepare checklists for observer score</a></li>
<li class="chapter" data-level="4.6" data-path="preparing-observer-expertise-scores.html"><a href="preparing-observer-expertise-scores.html#get-landcover"><i class="fa fa-check"></i><b>4.6</b> Get landcover</a></li>
<li class="chapter" data-level="4.7" data-path="preparing-observer-expertise-scores.html"><a href="preparing-observer-expertise-scores.html#filter-checklist-data"><i class="fa fa-check"></i><b>4.7</b> Filter checklist data</a></li>
<li class="chapter" data-level="4.8" data-path="preparing-observer-expertise-scores.html"><a href="preparing-observer-expertise-scores.html#model-observer-expertise"><i class="fa fa-check"></i><b>4.8</b> Model observer expertise</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html"><i class="fa fa-check"></i><b>5</b> Examining Spatial Sampling Bias</a><ul>
<li class="chapter" data-level="5.1" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#prepare-libraries-2"><i class="fa fa-check"></i><b>5.1</b> Prepare libraries</a></li>
<li class="chapter" data-level="5.2" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#read-checklist-data"><i class="fa fa-check"></i><b>5.2</b> Read checklist data</a><ul>
<li class="chapter" data-level="5.2.1" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#spatially-explicit-filter-on-checklists-1"><i class="fa fa-check"></i><b>5.2.1</b> Spatially explicit filter on checklists</a></li>
<li class="chapter" data-level="5.2.2" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#get-background-land-for-plotting"><i class="fa fa-check"></i><b>5.2.2</b> Get background land for plotting</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#prepare-main-text-figure-3"><i class="fa fa-check"></i><b>5.3</b> Prepare Main Text Figure 3</a><ul>
<li class="chapter" data-level="5.3.1" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#prepare-histogram-of-distance-to-roads"><i class="fa fa-check"></i><b>5.3.1</b> Prepare histogram of distance to roads</a></li>
<li class="chapter" data-level="5.3.2" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#table-distance-to-roads"><i class="fa fa-check"></i><b>5.3.2</b> Table: Distance to roads</a></li>
<li class="chapter" data-level="5.3.3" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#distance-to-nearest-neighbouring-site"><i class="fa fa-check"></i><b>5.3.3</b> Distance to nearest neighbouring site</a></li>
<li class="chapter" data-level="5.3.4" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#spatial-distribution-of-distances-to-neighbours"><i class="fa fa-check"></i><b>5.3.4</b> Spatial distribution of distances to neighbours</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="examining-spatial-sampling-bias.html"><a href="examining-spatial-sampling-bias.html#figure-spatial-sampling-bias"><i class="fa fa-check"></i><b>5.4</b> Figure: Spatial sampling bias</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="checking-temporal-sampling-frequency.html"><a href="checking-temporal-sampling-frequency.html"><i class="fa fa-check"></i><b>6</b> Checking Temporal Sampling Frequency</a><ul>
<li class="chapter" data-level="6.1" data-path="checking-temporal-sampling-frequency.html"><a href="checking-temporal-sampling-frequency.html#load-libraries"><i class="fa fa-check"></i><b>6.1</b> Load libraries</a></li>
<li class="chapter" data-level="6.2" data-path="checking-temporal-sampling-frequency.html"><a href="checking-temporal-sampling-frequency.html#load-checklist-data"><i class="fa fa-check"></i><b>6.2</b> Load checklist data</a></li>
<li class="chapter" data-level="6.3" data-path="checking-temporal-sampling-frequency.html"><a href="checking-temporal-sampling-frequency.html#get-time-differences-per-grid-cell"><i class="fa fa-check"></i><b>6.3</b> Get time differences per grid cell</a></li>
<li class="chapter" data-level="6.4" data-path="checking-temporal-sampling-frequency.html"><a href="checking-temporal-sampling-frequency.html#time-since-previous-checklist"><i class="fa fa-check"></i><b>6.4</b> Time Since Previous Checklist</a><ul>
<li class="chapter" data-level="6.4.1" data-path="checking-temporal-sampling-frequency.html"><a href="checking-temporal-sampling-frequency.html#get-aux-data"><i class="fa fa-check"></i><b>6.4.1</b> Get aux data</a></li>
<li class="chapter" data-level="6.4.2" data-path="checking-temporal-sampling-frequency.html"><a href="checking-temporal-sampling-frequency.html#histogram-of-lags"><i class="fa fa-check"></i><b>6.4.2</b> Histogram of lags</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="checking-temporal-sampling-frequency.html"><a href="checking-temporal-sampling-frequency.html#main-text-figure-3"><i class="fa fa-check"></i><b>6.5</b> Main Text Figure 3</a></li>
<li class="chapter" data-level="6.6" data-path="checking-temporal-sampling-frequency.html"><a href="checking-temporal-sampling-frequency.html#checklists-per-month"><i class="fa fa-check"></i><b>6.6</b> Checklists per Month</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html"><i class="fa fa-check"></i><b>7</b> Adding Covariates to Checklist Data</a><ul>
<li class="chapter" data-level="7.1" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#prepare-libraries-and-data"><i class="fa fa-check"></i><b>7.1</b> Prepare libraries and data</a></li>
<li class="chapter" data-level="7.2" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#spatial-subsampling"><i class="fa fa-check"></i><b>7.2</b> Spatial subsampling</a><ul>
<li class="chapter" data-level="7.2.1" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#counting-presence-observation-proportion"><i class="fa fa-check"></i><b>7.2.1</b> Counting presence observation proportion</a></li>
<li class="chapter" data-level="7.2.2" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#count-absences-after-spatial-thinning"><i class="fa fa-check"></i><b>7.2.2</b> Count absences after spatial thinning</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#temporal-subsampling"><i class="fa fa-check"></i><b>7.3</b> Temporal subsampling</a><ul>
<li class="chapter" data-level="7.3.1" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#count-absences-after-temporal-thinning"><i class="fa fa-check"></i><b>7.3.1</b> Count absences after temporal thinning</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#add-checklist-calibration-index"><i class="fa fa-check"></i><b>7.4</b> Add checklist calibration index</a></li>
<li class="chapter" data-level="7.5" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#add-climatic-and-landscape-covariates"><i class="fa fa-check"></i><b>7.5</b> Add climatic and landscape covariates</a></li>
<li class="chapter" data-level="7.6" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#spatial-buffers-around-selected-checklists"><i class="fa fa-check"></i><b>7.6</b> Spatial buffers around selected checklists</a></li>
<li class="chapter" data-level="7.7" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#spatial-buffer-wide-covariates"><i class="fa fa-check"></i><b>7.7</b> Spatial buffer-wide covariates</a><ul>
<li class="chapter" data-level="7.7.1" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#mean-climatic-covariates"><i class="fa fa-check"></i><b>7.7.1</b> Mean climatic covariates</a></li>
<li class="chapter" data-level="7.7.2" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#proportions-of-land-cover-type"><i class="fa fa-check"></i><b>7.7.2</b> Proportions of land cover type</a></li>
<li class="chapter" data-level="7.7.3" data-path="adding-covariates-to-checklist-data.html"><a href="adding-covariates-to-checklist-data.html#link-environmental-covariates-to-checklists"><i class="fa fa-check"></i><b>7.7.3</b> Link environmental covariates to checklists</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html"><i class="fa fa-check"></i><b>8</b> Modelling Species Occupancy</a><ul>
<li class="chapter" data-level="8.0.1" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#load-necessary-libraries"><i class="fa fa-check"></i><b>8.0.1</b> Load necessary libraries</a></li>
<li class="chapter" data-level="8.1" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#load-dataframe-and-prepare-covariates"><i class="fa fa-check"></i><b>8.1</b> Load dataframe and prepare covariates</a><ul>
<li class="chapter" data-level="8.1.1" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#handle-the-sampling-protocol"><i class="fa fa-check"></i><b>8.1.1</b> Handle the sampling protocol</a></li>
<li class="chapter" data-level="8.1.2" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#handle-time-and-date"><i class="fa fa-check"></i><b>8.1.2</b> Handle time and date</a></li>
<li class="chapter" data-level="8.1.3" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#scaling-covariates"><i class="fa fa-check"></i><b>8.1.3</b> Scaling covariates</a></li>
<li class="chapter" data-level="8.1.4" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#correct-date-format"><i class="fa fa-check"></i><b>8.1.4</b> Correct date format</a></li>
<li class="chapter" data-level="8.1.5" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#check-for-correlated-covariates"><i class="fa fa-check"></i><b>8.1.5</b> Check for correlated covariates</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#running-a-null-model"><i class="fa fa-check"></i><b>8.2</b> Running a null model</a></li>
<li class="chapter" data-level="8.3" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#identifying-covariates-necessary-to-model-the-detection-process"><i class="fa fa-check"></i><b>8.3</b> Identifying covariates necessary to model the detection process</a></li>
<li class="chapter" data-level="8.4" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#land-cover-and-climate"><i class="fa fa-check"></i><b>8.4</b> Land Cover and Climate</a></li>
<li class="chapter" data-level="8.5" data-path="modelling-species-occupancy.html"><a href="modelling-species-occupancy.html#goodness-of-fit-tests"><i class="fa fa-check"></i><b>8.5</b> Goodness-of-fit tests</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html"><i class="fa fa-check"></i><b>9</b> Visualizing Occupancy Predictor Effects</a><ul>
<li class="chapter" data-level="9.1" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html#prepare-libraries-3"><i class="fa fa-check"></i><b>9.1</b> Prepare libraries</a></li>
<li class="chapter" data-level="9.2" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html#load-species-list"><i class="fa fa-check"></i><b>9.2</b> Load species list</a></li>
<li class="chapter" data-level="9.3" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html#show-aic-weight-importance"><i class="fa fa-check"></i><b>9.3</b> Show AIC weight importance</a><ul>
<li class="chapter" data-level="9.3.1" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html#read-in-aic-weight-data"><i class="fa fa-check"></i><b>9.3.1</b> Read in AIC weight data</a></li>
<li class="chapter" data-level="9.3.2" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html#prepare-cumulative-aic-weight-data"><i class="fa fa-check"></i><b>9.3.2</b> Prepare cumulative AIC weight data</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html#prepare-model-coefficient-data"><i class="fa fa-check"></i><b>9.4</b> Prepare model coefficient data</a></li>
<li class="chapter" data-level="9.5" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html#get-predictor-effects"><i class="fa fa-check"></i><b>9.5</b> Get predictor effects</a></li>
<li class="chapter" data-level="9.6" data-path="visualizing-occupancy-predictor-effects.html"><a href="visualizing-occupancy-predictor-effects.html#main-text-figure-4"><i class="fa fa-check"></i><b>9.6</b> Main Text Figure 4</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>10</b> References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Source code for <em>Using citizen science to parse climatic and landcover influences on bird occupancy within a tropical biodiversity hotspot</em></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="visualizing-occupancy-predictor-effects" class="section level1">
<h1><span class="header-section-number">Section 9</span> Visualizing Occupancy Predictor Effects</h1>
<p>In this section, we will visualize the cumulative AIC weights and the magnitude and direction of species-specific probability of occupancy.</p>
<p>To get cumulative AIC weights, we first obtained a measure of relative importance of climatic and landscape predictors by calculating cumulative variable importance scores. These scores were calculated by obtaining the sum of model weights (AIC weights) across all models (including the top models) for each predictor across all species. We then calculated the mean cumulative variable importance score and a standard deviation for each predictor <span class="citation">(Burnham and Anderson <a href="#ref-burnham2002a">2002</a>)</span>.</p>
<div id="prepare-libraries-3" class="section level2">
<h2><span class="header-section-number">9.1</span> Prepare libraries</h2>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb87-1" data-line-number="1"><span class="co"># to load data</span></a>
<a class="sourceLine" id="cb87-2" data-line-number="2"><span class="kw">library</span>(readxl)</a>
<a class="sourceLine" id="cb87-3" data-line-number="3"></a>
<a class="sourceLine" id="cb87-4" data-line-number="4"><span class="co"># to handle data</span></a>
<a class="sourceLine" id="cb87-5" data-line-number="5"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb87-6" data-line-number="6"><span class="kw">library</span>(readr)</a>
<a class="sourceLine" id="cb87-7" data-line-number="7"><span class="kw">library</span>(forcats)</a>
<a class="sourceLine" id="cb87-8" data-line-number="8"><span class="kw">library</span>(tidyr)</a>
<a class="sourceLine" id="cb87-9" data-line-number="9"><span class="kw">library</span>(purrr)</a>
<a class="sourceLine" id="cb87-10" data-line-number="10"><span class="kw">library</span>(stringr)</a>
<a class="sourceLine" id="cb87-11" data-line-number="11"><span class="co"># library(data.table)</span></a>
<a class="sourceLine" id="cb87-12" data-line-number="12"></a>
<a class="sourceLine" id="cb87-13" data-line-number="13"><span class="co"># to wrangle models</span></a>
<a class="sourceLine" id="cb87-14" data-line-number="14"><span class="kw">source</span>(<span class="st">&quot;R/fun_model_estimate_collection.r&quot;</span>)</a>
<a class="sourceLine" id="cb87-15" data-line-number="15"><span class="kw">source</span>(<span class="st">&quot;R/fun_make_resp_data.r&quot;</span>)</a>
<a class="sourceLine" id="cb87-16" data-line-number="16"></a>
<a class="sourceLine" id="cb87-17" data-line-number="17"><span class="co"># nice tables</span></a>
<a class="sourceLine" id="cb87-18" data-line-number="18"><span class="kw">library</span>(knitr)</a>
<a class="sourceLine" id="cb87-19" data-line-number="19"><span class="kw">library</span>(kableExtra)</a>
<a class="sourceLine" id="cb87-20" data-line-number="20"></a>
<a class="sourceLine" id="cb87-21" data-line-number="21"><span class="co"># plotting</span></a>
<a class="sourceLine" id="cb87-22" data-line-number="22"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb87-23" data-line-number="23"><span class="kw">library</span>(patchwork)</a>
<a class="sourceLine" id="cb87-24" data-line-number="24"><span class="kw">source</span>(<span class="st">&quot;R/fun_plot_interaction.r&quot;</span>)</a></code></pre></div>
</div>
<div id="load-species-list" class="section level2">
<h2><span class="header-section-number">9.2</span> Load species list</h2>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb88-1" data-line-number="1"><span class="co"># list of species</span></a>
<a class="sourceLine" id="cb88-2" data-line-number="2"><span class="co"># Removing two species after running a chi-square goodness of fit test</span></a>
<a class="sourceLine" id="cb88-3" data-line-number="3">species &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;data/species_list.csv&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb88-4" data-line-number="4"><span class="st">  </span><span class="kw">filter</span>(scientific_name <span class="op">!=</span><span class="st"> &quot;Montecincla fairbanki&quot;</span> <span class="op">&amp;</span></a>
<a class="sourceLine" id="cb88-5" data-line-number="5"><span class="st">    </span>scientific_name <span class="op">!=</span><span class="st"> &quot;Orthotomus sutorius&quot;</span>)</a>
<a class="sourceLine" id="cb88-6" data-line-number="6"></a>
<a class="sourceLine" id="cb88-7" data-line-number="7">list_of_species &lt;-<span class="st"> </span><span class="kw">as.character</span>(species<span class="op">$</span>scientific_name)</a></code></pre></div>
</div>
<div id="show-aic-weight-importance" class="section level2">
<h2><span class="header-section-number">9.3</span> Show AIC weight importance</h2>
<div id="read-in-aic-weight-data" class="section level3">
<h3><span class="header-section-number">9.3.1</span> Read in AIC weight data</h3>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb89-1" data-line-number="1"><span class="co"># which files to read</span></a>
<a class="sourceLine" id="cb89-2" data-line-number="2">file_names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;data/results/lc-clim-imp.xlsx&quot;</span>)</a>
<a class="sourceLine" id="cb89-3" data-line-number="3"></a>
<a class="sourceLine" id="cb89-4" data-line-number="4"><span class="co"># read in sheets by species</span></a>
<a class="sourceLine" id="cb89-5" data-line-number="5">model_imp &lt;-<span class="st"> </span><span class="kw">map</span>(file_names, <span class="cf">function</span>(f) {</a>
<a class="sourceLine" id="cb89-6" data-line-number="6">  md_list &lt;-<span class="st"> </span><span class="kw">map</span>(list_of_species, <span class="cf">function</span>(sn) {</a>
<a class="sourceLine" id="cb89-7" data-line-number="7"></a>
<a class="sourceLine" id="cb89-8" data-line-number="8">    <span class="co"># some sheets are not found</span></a>
<a class="sourceLine" id="cb89-9" data-line-number="9"></a>
<a class="sourceLine" id="cb89-10" data-line-number="10">    <span class="kw">tryCatch</span>(</a>
<a class="sourceLine" id="cb89-11" data-line-number="11">      {</a>
<a class="sourceLine" id="cb89-12" data-line-number="12">        readxl<span class="op">::</span><span class="kw">read_excel</span>(f, <span class="dt">sheet =</span> sn) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb89-13" data-line-number="13"><span class="st">          `</span><span class="dt">colnames&lt;-</span><span class="st">`</span>(<span class="kw">c</span>(<span class="st">&quot;predictor&quot;</span>, <span class="st">&quot;AIC_weight&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb89-14" data-line-number="14"><span class="st">          </span><span class="kw">filter</span>(<span class="kw">str_detect</span>(predictor, <span class="st">&quot;psi&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb89-15" data-line-number="15"><span class="st">          </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb89-16" data-line-number="16">            <span class="dt">predictor =</span> stringr<span class="op">::</span><span class="kw">str_extract</span>(predictor,</a>
<a class="sourceLine" id="cb89-17" data-line-number="17">              <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw">regex</span>(<span class="st">&quot;</span><span class="ch">\\</span><span class="st">((.*?)</span><span class="ch">\\</span><span class="st">)&quot;</span>)</a>
<a class="sourceLine" id="cb89-18" data-line-number="18">            ),</a>
<a class="sourceLine" id="cb89-19" data-line-number="19">            <span class="dt">predictor =</span> stringr<span class="op">::</span><span class="kw">str_replace_all</span>(predictor, <span class="st">&quot;[//(//)]&quot;</span>, <span class="st">&quot;&quot;</span>),</a>
<a class="sourceLine" id="cb89-20" data-line-number="20">            <span class="dt">predictor =</span> stringr<span class="op">::</span><span class="kw">str_remove</span>(predictor, <span class="st">&quot;</span><span class="ch">\\</span><span class="st">.y&quot;</span>)</a>
<a class="sourceLine" id="cb89-21" data-line-number="21">          )</a>
<a class="sourceLine" id="cb89-22" data-line-number="22">      },</a>
<a class="sourceLine" id="cb89-23" data-line-number="23">      <span class="dt">error =</span> <span class="cf">function</span>(e) {</a>
<a class="sourceLine" id="cb89-24" data-line-number="24">        <span class="kw">message</span>(<span class="kw">as.character</span>(e))</a>
<a class="sourceLine" id="cb89-25" data-line-number="25">      }</a>
<a class="sourceLine" id="cb89-26" data-line-number="26">    )</a>
<a class="sourceLine" id="cb89-27" data-line-number="27">  })</a>
<a class="sourceLine" id="cb89-28" data-line-number="28">  <span class="kw">names</span>(md_list) &lt;-<span class="st"> </span>list_of_species</a>
<a class="sourceLine" id="cb89-29" data-line-number="29"></a>
<a class="sourceLine" id="cb89-30" data-line-number="30">  <span class="kw">return</span>(md_list)</a>
<a class="sourceLine" id="cb89-31" data-line-number="31">})</a></code></pre></div>
</div>
<div id="prepare-cumulative-aic-weight-data" class="section level3">
<h3><span class="header-section-number">9.3.2</span> Prepare cumulative AIC weight data</h3>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb90-1" data-line-number="1"><span class="co"># bind rows</span></a>
<a class="sourceLine" id="cb90-2" data-line-number="2">model_imp &lt;-<span class="st"> </span><span class="kw">map</span>(model_imp, bind_rows) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb90-3" data-line-number="3"><span class="st">  </span><span class="kw">bind_rows</span>()</a>
<a class="sourceLine" id="cb90-4" data-line-number="4"></a>
<a class="sourceLine" id="cb90-5" data-line-number="5"><span class="co"># convert to numeric</span></a>
<a class="sourceLine" id="cb90-6" data-line-number="6">model_imp<span class="op">$</span>AIC_weight &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(model_imp<span class="op">$</span>AIC_weight)</a>
<a class="sourceLine" id="cb90-7" data-line-number="7"></a>
<a class="sourceLine" id="cb90-8" data-line-number="8"><span class="co"># Let&#39;s get a summary of cumulative variable importance</span></a>
<a class="sourceLine" id="cb90-9" data-line-number="9">model_imp &lt;-<span class="st"> </span><span class="kw">group_by</span>(model_imp, predictor) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb90-10" data-line-number="10"><span class="st">  </span><span class="kw">summarise</span>(</a>
<a class="sourceLine" id="cb90-11" data-line-number="11">    <span class="dt">mean_AIC =</span> <span class="kw">mean</span>(AIC_weight),</a>
<a class="sourceLine" id="cb90-12" data-line-number="12">    <span class="dt">sd_AIC =</span> <span class="kw">sd</span>(AIC_weight),</a>
<a class="sourceLine" id="cb90-13" data-line-number="13">    <span class="dt">min_AIC =</span> <span class="kw">min</span>(AIC_weight),</a>
<a class="sourceLine" id="cb90-14" data-line-number="14">    <span class="dt">max_AIC =</span> <span class="kw">max</span>(AIC_weight),</a>
<a class="sourceLine" id="cb90-15" data-line-number="15">    <span class="dt">med_AIC =</span> <span class="kw">median</span>(AIC_weight)</a>
<a class="sourceLine" id="cb90-16" data-line-number="16">  )</a>
<a class="sourceLine" id="cb90-17" data-line-number="17"></a>
<a class="sourceLine" id="cb90-18" data-line-number="18"><span class="co"># write to file</span></a>
<a class="sourceLine" id="cb90-19" data-line-number="19"><span class="kw">write_csv</span>(model_imp,</a>
<a class="sourceLine" id="cb90-20" data-line-number="20">  <span class="dt">file =</span> <span class="st">&quot;data/results/cumulative_AIC_weights.csv&quot;</span></a>
<a class="sourceLine" id="cb90-21" data-line-number="21">)</a></code></pre></div>
<p>Read data back in.</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb91-1" data-line-number="1"><span class="co"># read data and make factor</span></a>
<a class="sourceLine" id="cb91-2" data-line-number="2">model_imp &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;data/results/cumulative_AIC_weights.csv&quot;</span>)</a>
<a class="sourceLine" id="cb91-3" data-line-number="3">model_imp<span class="op">$</span>predictor &lt;-<span class="st"> </span><span class="kw">as_factor</span>(model_imp<span class="op">$</span>predictor)</a></code></pre></div>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb92-1" data-line-number="1"><span class="co"># make nice names</span></a>
<a class="sourceLine" id="cb92-2" data-line-number="2">predictor_name &lt;-<span class="st"> </span><span class="kw">tibble</span>(</a>
<a class="sourceLine" id="cb92-3" data-line-number="3">  <span class="dt">predictor =</span> <span class="kw">levels</span>(model_imp<span class="op">$</span>predictor),</a>
<a class="sourceLine" id="cb92-4" data-line-number="4">  <span class="dt">pred_name =</span> <span class="kw">c</span>(</a>
<a class="sourceLine" id="cb92-5" data-line-number="5">    <span class="st">&quot;Precipitation Seasonality&quot;</span>,</a>
<a class="sourceLine" id="cb92-6" data-line-number="6">    <span class="st">&quot;Temperature Seasonality&quot;</span>,</a>
<a class="sourceLine" id="cb92-7" data-line-number="7">    <span class="st">&quot;% Evergreen Forest&quot;</span>, <span class="st">&quot;% Deciduous Forest&quot;</span>,</a>
<a class="sourceLine" id="cb92-8" data-line-number="8">    <span class="st">&quot;% Mixed/Degraded Forest&quot;</span>, <span class="st">&quot;% Agriculture/Settlements&quot;</span>,</a>
<a class="sourceLine" id="cb92-9" data-line-number="9">    <span class="st">&quot;% Grassland&quot;</span>, <span class="st">&quot;% Plantations&quot;</span>, <span class="st">&quot;% Water Bodies&quot;</span></a>
<a class="sourceLine" id="cb92-10" data-line-number="10">  )</a>
<a class="sourceLine" id="cb92-11" data-line-number="11">)</a>
<a class="sourceLine" id="cb92-12" data-line-number="12"></a>
<a class="sourceLine" id="cb92-13" data-line-number="13"><span class="co"># rename predictor</span></a>
<a class="sourceLine" id="cb92-14" data-line-number="14">model_imp &lt;-<span class="st"> </span><span class="kw">left_join</span>(model_imp, predictor_name)</a></code></pre></div>
<p>Prepare figure for cumulative AIC weight. Figure code is hidden in versions rendered as HTML and PDF.</p>
</div>
</div>
<div id="prepare-model-coefficient-data" class="section level2">
<h2><span class="header-section-number">9.4</span> Prepare model coefficient data</h2>
<p>For each species, we examined those models which had ΔAICc &lt; 2, as these top models were considered to explain a large proportion of the association between the species-specific probability of occupancy and environmental drivers <span class="citation">(Burnham, Anderson, and Huyvaert <a href="#ref-burnham2011">2011</a>; Elsen et al. <a href="#ref-elsen2017">2017</a>)</span>. Using these restricted model sets for each species; we created a model-averaged coefficient estimate for each predictor and assessed its direction and significance <span class="citation">(Bartoń <a href="#ref-MuMIn">2020</a>)</span>. We considered a predictor to be significantly associated with occupancy if the range of the 95% confidence interval around the model-averaged coefficient did not contain zero.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb93-1" data-line-number="1">file_read &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;data/results/lc-clim-modelEst.xlsx&quot;</span>)</a>
<a class="sourceLine" id="cb93-2" data-line-number="2"></a>
<a class="sourceLine" id="cb93-3" data-line-number="3"><span class="co"># read data as list column</span></a>
<a class="sourceLine" id="cb93-4" data-line-number="4">model_est &lt;-<span class="st"> </span><span class="kw">map</span>(list_of_species, <span class="cf">function</span>(sn) {</a>
<a class="sourceLine" id="cb93-5" data-line-number="5">  <span class="kw">tryCatch</span>(</a>
<a class="sourceLine" id="cb93-6" data-line-number="6">    {</a>
<a class="sourceLine" id="cb93-7" data-line-number="7">      readxl<span class="op">::</span><span class="kw">read_excel</span>(file_read, <span class="dt">sheet =</span> sn) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb93-8" data-line-number="8"><span class="st">        </span><span class="kw">rename</span>(<span class="dt">predictor =</span> <span class="st">&quot;...1&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb93-9" data-line-number="9"><span class="st">        </span><span class="kw">filter</span>(<span class="kw">str_detect</span>(predictor, <span class="st">&quot;psi&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb93-10" data-line-number="10"><span class="st">        </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb93-11" data-line-number="11">          <span class="dt">predictor =</span> stringr<span class="op">::</span><span class="kw">str_extract</span>(predictor,</a>
<a class="sourceLine" id="cb93-12" data-line-number="12">            <span class="dt">pattern =</span> stringr<span class="op">::</span><span class="kw">regex</span>(<span class="st">&quot;</span><span class="ch">\\</span><span class="st">((.*?)</span><span class="ch">\\</span><span class="st">)&quot;</span>)</a>
<a class="sourceLine" id="cb93-13" data-line-number="13">          ),</a>
<a class="sourceLine" id="cb93-14" data-line-number="14">          <span class="dt">predictor =</span> stringr<span class="op">::</span><span class="kw">str_replace_all</span>(predictor, <span class="st">&quot;[//(//)]&quot;</span>, <span class="st">&quot;&quot;</span>),</a>
<a class="sourceLine" id="cb93-15" data-line-number="15">          <span class="dt">predictor =</span> stringr<span class="op">::</span><span class="kw">str_remove</span>(predictor, <span class="st">&quot;</span><span class="ch">\\</span><span class="st">.y&quot;</span>)</a>
<a class="sourceLine" id="cb93-16" data-line-number="16">        )</a>
<a class="sourceLine" id="cb93-17" data-line-number="17">    },</a>
<a class="sourceLine" id="cb93-18" data-line-number="18">    <span class="dt">error =</span> <span class="cf">function</span>(e) {</a>
<a class="sourceLine" id="cb93-19" data-line-number="19">      <span class="kw">message</span>(<span class="kw">as.character</span>(e))</a>
<a class="sourceLine" id="cb93-20" data-line-number="20">    }</a>
<a class="sourceLine" id="cb93-21" data-line-number="21">  )</a>
<a class="sourceLine" id="cb93-22" data-line-number="22">})</a>
<a class="sourceLine" id="cb93-23" data-line-number="23"><span class="co"># assign names</span></a>
<a class="sourceLine" id="cb93-24" data-line-number="24"><span class="kw">names</span>(model_est) &lt;-<span class="st"> </span>list_of_species</a>
<a class="sourceLine" id="cb93-25" data-line-number="25"></a>
<a class="sourceLine" id="cb93-26" data-line-number="26"><span class="co"># prepare model data</span></a>
<a class="sourceLine" id="cb93-27" data-line-number="27">model_data &lt;-<span class="st"> </span><span class="kw">tibble</span>(</a>
<a class="sourceLine" id="cb93-28" data-line-number="28">  <span class="dt">scientific_name =</span> list_of_species</a>
<a class="sourceLine" id="cb93-29" data-line-number="29">)</a>
<a class="sourceLine" id="cb93-30" data-line-number="30"></a>
<a class="sourceLine" id="cb93-31" data-line-number="31"><span class="co"># remove null data</span></a>
<a class="sourceLine" id="cb93-32" data-line-number="32">model_est &lt;-<span class="st"> </span><span class="kw">keep</span>(model_est, <span class="dt">.p =</span> <span class="cf">function</span>(x) <span class="op">!</span><span class="kw">is.null</span>(x))</a>
<a class="sourceLine" id="cb93-33" data-line-number="33"></a>
<a class="sourceLine" id="cb93-34" data-line-number="34"><span class="co"># rename model data components and separate predictors</span></a>
<a class="sourceLine" id="cb93-35" data-line-number="35">names &lt;-<span class="st"> </span><span class="kw">c</span>(</a>
<a class="sourceLine" id="cb93-36" data-line-number="36">  <span class="st">&quot;predictor&quot;</span>, <span class="st">&quot;coefficient&quot;</span>, <span class="st">&quot;se&quot;</span>, <span class="st">&quot;ci_lower&quot;</span>,</a>
<a class="sourceLine" id="cb93-37" data-line-number="37">  <span class="st">&quot;ci_higher&quot;</span>, <span class="st">&quot;z_value&quot;</span>, <span class="st">&quot;p_value&quot;</span></a>
<a class="sourceLine" id="cb93-38" data-line-number="38">)</a>
<a class="sourceLine" id="cb93-39" data-line-number="39"></a>
<a class="sourceLine" id="cb93-40" data-line-number="40"><span class="co"># get data for plotting:</span></a>
<a class="sourceLine" id="cb93-41" data-line-number="41">model_est &lt;-<span class="st"> </span><span class="kw">map</span>(model_est, <span class="cf">function</span>(df) {</a>
<a class="sourceLine" id="cb93-42" data-line-number="42">  <span class="kw">colnames</span>(df) &lt;-<span class="st"> </span>names</a>
<a class="sourceLine" id="cb93-43" data-line-number="43">  <span class="co"># df &lt;- separate_interaction_terms(df)</span></a>
<a class="sourceLine" id="cb93-44" data-line-number="44">  <span class="co"># df &lt;- make_response_data(df)</span></a>
<a class="sourceLine" id="cb93-45" data-line-number="45">  <span class="kw">return</span>(df)</a>
<a class="sourceLine" id="cb93-46" data-line-number="46">})</a>
<a class="sourceLine" id="cb93-47" data-line-number="47"></a>
<a class="sourceLine" id="cb93-48" data-line-number="48"><span class="co"># add names and scales</span></a>
<a class="sourceLine" id="cb93-49" data-line-number="49">model_est &lt;-<span class="st"> </span><span class="kw">imap</span>(model_est, <span class="cf">function</span>(.x, .y) {</a>
<a class="sourceLine" id="cb93-50" data-line-number="50">  <span class="kw">mutate</span>(.x, <span class="dt">scientific_name =</span> .y)</a>
<a class="sourceLine" id="cb93-51" data-line-number="51">})</a>
<a class="sourceLine" id="cb93-52" data-line-number="52"></a>
<a class="sourceLine" id="cb93-53" data-line-number="53"><span class="co"># remove modulators</span></a>
<a class="sourceLine" id="cb93-54" data-line-number="54">model_est &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(model_est) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb93-55" data-line-number="55"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span><span class="kw">matches</span>(<span class="st">&quot;modulator&quot;</span>))</a>
<a class="sourceLine" id="cb93-56" data-line-number="56"></a>
<a class="sourceLine" id="cb93-57" data-line-number="57"><span class="co"># join data to species name</span></a>
<a class="sourceLine" id="cb93-58" data-line-number="58">model_data &lt;-<span class="st"> </span>model_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb93-59" data-line-number="59"><span class="st">  </span><span class="kw">left_join</span>(model_est)</a>
<a class="sourceLine" id="cb93-60" data-line-number="60"></a>
<a class="sourceLine" id="cb93-61" data-line-number="61"><span class="co"># Keep only those predictors whose p-values are significant:</span></a>
<a class="sourceLine" id="cb93-62" data-line-number="62">model_data &lt;-<span class="st"> </span>model_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb93-63" data-line-number="63"><span class="st">  </span><span class="kw">filter</span>(p_value <span class="op">&lt;</span><span class="st"> </span><span class="fl">0.05</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb93-64" data-line-number="64"><span class="st">  </span><span class="kw">filter</span>(predictor <span class="op">!=</span><span class="st"> &quot;Int&quot;</span>)</a></code></pre></div>
<p>Export predictor effects.</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb94-1" data-line-number="1"><span class="co"># get predictor effect data</span></a>
<a class="sourceLine" id="cb94-2" data-line-number="2">data_predictor_effect &lt;-<span class="st"> </span><span class="kw">distinct</span>(</a>
<a class="sourceLine" id="cb94-3" data-line-number="3">  model_data,</a>
<a class="sourceLine" id="cb94-4" data-line-number="4">  scientific_name,</a>
<a class="sourceLine" id="cb94-5" data-line-number="5">  se,</a>
<a class="sourceLine" id="cb94-6" data-line-number="6">  predictor, coefficient</a>
<a class="sourceLine" id="cb94-7" data-line-number="7">)</a>
<a class="sourceLine" id="cb94-8" data-line-number="8"></a>
<a class="sourceLine" id="cb94-9" data-line-number="9"><span class="co"># write to file</span></a>
<a class="sourceLine" id="cb94-10" data-line-number="10"><span class="kw">write_csv</span>(data_predictor_effect,</a>
<a class="sourceLine" id="cb94-11" data-line-number="11">  <span class="dt">file =</span> <span class="st">&quot;data/results/data_predictor_effect.csv&quot;</span></a>
<a class="sourceLine" id="cb94-12" data-line-number="12">)</a></code></pre></div>
<p>Export model data.</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb95-1" data-line-number="1">model_data_to_file &lt;-<span class="st"> </span>model_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb95-2" data-line-number="2"><span class="st">  </span><span class="kw">select</span>(</a>
<a class="sourceLine" id="cb95-3" data-line-number="3">    predictor,</a>
<a class="sourceLine" id="cb95-4" data-line-number="4">    scientific_name</a>
<a class="sourceLine" id="cb95-5" data-line-number="5">  )</a>
<a class="sourceLine" id="cb95-6" data-line-number="6"></a>
<a class="sourceLine" id="cb95-7" data-line-number="7"><span class="co"># remove .y</span></a>
<a class="sourceLine" id="cb95-8" data-line-number="8">model_data_to_file &lt;-<span class="st"> </span>model_data_to_file <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb95-9" data-line-number="9"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">predictor =</span> <span class="kw">str_remove</span>(predictor, <span class="st">&quot;</span><span class="ch">\\</span><span class="st">.y&quot;</span>))</a>
<a class="sourceLine" id="cb95-10" data-line-number="10"></a>
<a class="sourceLine" id="cb95-11" data-line-number="11"><span class="kw">write_csv</span>(</a>
<a class="sourceLine" id="cb95-12" data-line-number="12">  model_data_to_file,</a>
<a class="sourceLine" id="cb95-13" data-line-number="13">  <span class="st">&quot;data/results/data_occupancy_predictors.csv&quot;</span></a>
<a class="sourceLine" id="cb95-14" data-line-number="14">)</a></code></pre></div>
<p>Read in data after clearing R session.</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb96-1" data-line-number="1"><span class="co"># first merge species trait data with significant predictor</span></a>
<a class="sourceLine" id="cb96-2" data-line-number="2">species_trait &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;data/species-trait-dat.csv&quot;</span>)</a>
<a class="sourceLine" id="cb96-3" data-line-number="3">sig_predictor &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;data/results/data_predictor_effect.csv&quot;</span>)</a>
<a class="sourceLine" id="cb96-4" data-line-number="4">merged_species_traits &lt;-<span class="st"> </span><span class="kw">inner_join</span>(sig_predictor, species_trait,</a>
<a class="sourceLine" id="cb96-5" data-line-number="5">  <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;scientific_name&quot;</span> =<span class="st"> &quot;scientific_name&quot;</span>)</a>
<a class="sourceLine" id="cb96-6" data-line-number="6">)</a>
<a class="sourceLine" id="cb96-7" data-line-number="7"><span class="kw">write_csv</span>(</a>
<a class="sourceLine" id="cb96-8" data-line-number="8">  merged_species_traits,</a>
<a class="sourceLine" id="cb96-9" data-line-number="9">  <span class="st">&quot;data/results/results-predictors-species-traits.csv&quot;</span></a>
<a class="sourceLine" id="cb96-10" data-line-number="10">)</a>
<a class="sourceLine" id="cb96-11" data-line-number="11"></a>
<a class="sourceLine" id="cb96-12" data-line-number="12"></a>
<a class="sourceLine" id="cb96-13" data-line-number="13"><span class="co"># read from file</span></a>
<a class="sourceLine" id="cb96-14" data-line-number="14">model_data &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;data/results/results-predictors-species-traits.csv&quot;</span>)</a></code></pre></div>
<p>Fix predictor name.</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb97-1" data-line-number="1"><span class="co"># remove .y from predictors</span></a>
<a class="sourceLine" id="cb97-2" data-line-number="2">model_data &lt;-<span class="st"> </span>model_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb97-3" data-line-number="3"><span class="st">  </span><span class="kw">mutate_at</span>(<span class="dt">.vars =</span> <span class="kw">c</span>(<span class="st">&quot;predictor&quot;</span>), <span class="dt">.funs =</span> <span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb97-4" data-line-number="4">    stringr<span class="op">::</span><span class="kw">str_remove</span>(x, <span class="st">&quot;.y&quot;</span>)</a>
<a class="sourceLine" id="cb97-5" data-line-number="5">  })</a></code></pre></div>
</div>
<div id="get-predictor-effects" class="section level2">
<h2><span class="header-section-number">9.5</span> Get predictor effects</h2>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb98-1" data-line-number="1"><span class="co"># is the coeff positive? how many positive per scale per predictor per axis of split?</span></a>
<a class="sourceLine" id="cb98-2" data-line-number="2"><span class="co"># now splitting by habitat --- forest or open country</span></a>
<a class="sourceLine" id="cb98-3" data-line-number="3">data_predictor &lt;-<span class="st"> </span><span class="kw">mutate</span>(model_data,</a>
<a class="sourceLine" id="cb98-4" data-line-number="4">  <span class="dt">direction =</span> coefficient <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb98-5" data-line-number="5">) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb98-6" data-line-number="6"><span class="st">  </span><span class="kw">filter</span>(predictor <span class="op">!=</span><span class="st"> &quot;Int&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb98-7" data-line-number="7"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">habitat =</span> <span class="st">&quot;Habitat.use&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb98-8" data-line-number="8"><span class="st">  </span><span class="kw">count</span>(</a>
<a class="sourceLine" id="cb98-9" data-line-number="9">    predictor,</a>
<a class="sourceLine" id="cb98-10" data-line-number="10">    habitat,</a>
<a class="sourceLine" id="cb98-11" data-line-number="11">    direction</a>
<a class="sourceLine" id="cb98-12" data-line-number="12">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb98-13" data-line-number="13"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">mag =</span> n <span class="op">*</span><span class="st"> </span>(<span class="kw">if_else</span>(direction, <span class="dv">1</span>, <span class="dv">-1</span>)))</a>
<a class="sourceLine" id="cb98-14" data-line-number="14"></a>
<a class="sourceLine" id="cb98-15" data-line-number="15"><span class="co"># wrangle data to get nice bars</span></a>
<a class="sourceLine" id="cb98-16" data-line-number="16">data_predictor &lt;-<span class="st"> </span>data_predictor <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb98-17" data-line-number="17"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>n) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb98-18" data-line-number="18"><span class="st">  </span><span class="kw">drop_na</span>(direction) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb98-19" data-line-number="19"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">direction =</span> <span class="kw">ifelse</span>(direction, <span class="st">&quot;positive&quot;</span>, <span class="st">&quot;negative&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb98-20" data-line-number="20"><span class="st">  </span><span class="kw">pivot_wider</span>(<span class="dt">values_from =</span> <span class="st">&quot;mag&quot;</span>, <span class="dt">names_from =</span> <span class="st">&quot;direction&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb98-21" data-line-number="21"><span class="st">  </span><span class="kw">mutate_at</span>(</a>
<a class="sourceLine" id="cb98-22" data-line-number="22">    <span class="kw">vars</span>(positive, negative),</a>
<a class="sourceLine" id="cb98-23" data-line-number="23">    <span class="op">~</span><span class="st"> </span><span class="kw">if_else</span>(<span class="kw">is.na</span>(.), <span class="dv">0</span>, .)</a>
<a class="sourceLine" id="cb98-24" data-line-number="24">  )</a>
<a class="sourceLine" id="cb98-25" data-line-number="25"></a>
<a class="sourceLine" id="cb98-26" data-line-number="26">data_predictor_long &lt;-<span class="st"> </span>data_predictor <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb98-27" data-line-number="27"><span class="st">  </span><span class="kw">pivot_longer</span>(</a>
<a class="sourceLine" id="cb98-28" data-line-number="28">    <span class="dt">cols =</span> <span class="kw">c</span>(<span class="st">&quot;negative&quot;</span>, <span class="st">&quot;positive&quot;</span>),</a>
<a class="sourceLine" id="cb98-29" data-line-number="29">    <span class="dt">names_to =</span> <span class="st">&quot;effect&quot;</span>,</a>
<a class="sourceLine" id="cb98-30" data-line-number="30">    <span class="dt">values_to =</span> <span class="st">&quot;magnitude&quot;</span></a>
<a class="sourceLine" id="cb98-31" data-line-number="31">  )</a>
<a class="sourceLine" id="cb98-32" data-line-number="32"></a>
<a class="sourceLine" id="cb98-33" data-line-number="33"><span class="co"># write</span></a>
<a class="sourceLine" id="cb98-34" data-line-number="34"><span class="kw">write_csv</span>(data_predictor_long,</a>
<a class="sourceLine" id="cb98-35" data-line-number="35">  <span class="dt">file =</span> <span class="st">&quot;data/results/data_predictor_direction_nSpecies.csv&quot;</span></a>
<a class="sourceLine" id="cb98-36" data-line-number="36">)</a></code></pre></div>
<p>Prepare data to determine the direction (positive or negative) of the effect of each predictor. How many species are affected in either direction?</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb99-1" data-line-number="1"><span class="co"># join with predictor names and relative AIC</span></a>
<a class="sourceLine" id="cb99-2" data-line-number="2">data_predictor_long &lt;-<span class="st"> </span><span class="kw">left_join</span>(data_predictor_long, model_imp)</a></code></pre></div>
<p>Prepare figure of the number of species affected in each direction. Figure code is hidden in versions rendered as HTML and PDF.</p>
</div>
<div id="main-text-figure-4" class="section level2">
<h2><span class="header-section-number">9.6</span> Main Text Figure 4</h2>
<p>Figure code is hidden in versions rendered as HTML and PDF.</p>
<div class="figure">
<img src="figs/fig_04.png" alt="Relative importance of environmental predictors and species-specific associations. (a) The examination of cumulative variable importance scores revealed that the probability of occupancy for all species was most strongly associated with temperature seasonality (mean across all species = 0.88; sd = 0.26), followed by the proportion of evergreen forests (mean across all species = 0.81; sd = 0.25) and the proportion of deciduous forests (mean across all species = 0.65; sd = 0.33). (b) The direction of association between species-specific probability of occupancy and climatic and landscape predictors is shown here (as a function of habitat preference). The probability of occupancy of ~79% (n=63/80) of species examined was significantly (p&lt;0.05) associated with temperature seasonality." />
<p class="caption"><strong>Relative importance of environmental predictors and species-specific associations.</strong>
(a) The examination of cumulative variable importance scores revealed that the probability of occupancy for all species was most strongly associated with temperature seasonality (mean across all species = 0.88; sd = 0.26), followed by the proportion of evergreen forests (mean across all species = 0.81; sd = 0.25) and the proportion of deciduous forests (mean across all species = 0.65; sd = 0.33). (b) The direction of association between species-specific probability of occupancy and climatic and landscape predictors is shown here (as a function of habitat preference). The probability of occupancy of ~79% (n=63/80) of species examined was significantly (p&lt;0.05) associated with temperature seasonality.</p>
</div>


</div>
</div>
<h3> References</h3>
<div id="refs" class="references">
<div id="ref-MuMIn">
<p>Bartoń, Kamil. 2020. <em>MuMIn: Multi-Model Inference</em>. Manual.</p>
</div>
<div id="ref-burnham2002a">
<p>Burnham, Kenneth P., and David R. Anderson. 2002. <em>Model Selection and Multimodel Inference: A Practical Information-Theoretic Approach</em>. Second. New York: Springer-Verlag. <a href="https://doi.org/10.1007/b97636" class="uri">https://doi.org/10.1007/b97636</a>.</p>
</div>
<div id="ref-burnham2011">
<p>Burnham, Kenneth P., David R. Anderson, and Kathryn P. Huyvaert. 2011. “AIC Model Selection and Multimodel Inference in Behavioral Ecology: Some Background, Observations, and Comparisons.” <em>Behavioral Ecology and Sociobiology</em> 65 (1): 23–35. <a href="https://doi.org/10.1007/s00265-010-1029-6" class="uri">https://doi.org/10.1007/s00265-010-1029-6</a>.</p>
</div>
<div id="ref-elsen2017">
<p>Elsen, Paul R., Morgan W. Tingley, Ramnarayan Kalyanaraman, Krishnamurthy Ramesh, and David S. Wilcove. 2017. “The Role of Competition, Ecotones, and Temperature in the Elevational Distribution of Himalayan Birds.” <em>Ecology</em> 98 (2): 337–48. <a href="https://doi.org/10.1002/ecy.1669" class="uri">https://doi.org/10.1002/ecy.1669</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="modelling-species-occupancy.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="references.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/pratikunterwegs/eBirdOccupancy/edit/master/09_results-AICweights-probOfOccupancy.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
