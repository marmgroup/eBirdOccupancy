---
editor_options: 
  chunk_output_type: console
---

# Results: Occupancy predictors

## Prepare libraries

```{r load_libs_results02, eval=FALSE}
# to load data
library(readxl)

# to handle data
library(dplyr)
library(readr)
library(forcats)
library(tidyr)
library(purrr)
library(stringr)

# plotting
library(ggplot2)
library(patchwork)
```

## Read data

```{r}
# read data
data <- read_csv("data/results/data_occupancy_predictors.csv")
```

```{r}
# drop na
data <- select(data,
               -ci) %>% 
  drop_na() %>% 
  nest(-scientific_name)
```

```{r}
fig_occupancy <- map(data$data, function(df) {
  ggplot(df)+
  geom_line(aes(seq_x, mean,
                col = predictor))+
  facet_grid(~ scale,
             labeller = label_both) +
  coord_cartesian(xlim = c(0, 1),
                  ylim = c(0, 1))+
  theme_test(base_size = 8) +
  theme(legend.position = "top")+
  scale_colour_manual(values = pals::kovesi.rainbow(8))+
  labs(x = "scaled predictor value",
       y = "p(occupancy)")
})
```

```{r}
cairo_pdf(filename = "figs/fig_occupancy_predictors.pdf")
fig_occupancy
dev.off()
```
